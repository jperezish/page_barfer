#!/usr/bin/env ruby

require_relative '../lib/barf'

require "thor"

module PageBarfer
  class Commands < Thor
    include Thor::Actions

    desc "barf FILE_NAME LAYOUT_NAME",
          "create pages based on LAYOUT_NAME for each record in FILE_NAME"
    long_desc <<-LONGDESC
      This is a long description

      Okay it's not really that long.
    LONGDESC
    def barf(file_name=nil, layout_name=nil)
      if file_name
        puts "Successfully imported #{file_name}."
      else
        file_name = ask "What's the file name?"
        Barf.generate_pages_from(file_name, layout_name)
      end
    end

    desc "prepare JEKYLL_SITE_NAME",
          "prepare Page Barfer for use."
    long_desc <<-LONGDESC
      The prepare command will add a Page Barfer folder,
      add a config file, and provide some instruction on what to do next.
    LONGDESC
    def prepare(jekyll_site_name=nil)
      puts "Page Barfer is ready for use."
    end
  end
end

PageBarfer::Commands.start(ARGV)